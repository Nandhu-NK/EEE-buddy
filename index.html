<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>EEE Buddy ‚Äî Multi-Tool</title>
<style>
  /* ‚Äî‚Äî Background ‚Äî‚Äî */
  body{
    margin:0;
    font-family:'Segoe UI', Arial, sans-serif;
    background:url('background.png') no-repeat center center/cover;
    background-attachment:fixed;
    color:#fff;
    text-align:center;
  }
  body::before{
    content:"";position:fixed;inset:0;
    background:rgba(0,0,0,.55);
    z-index:-1;
  }

  header{padding:20px}
  header h1{
    font-size:2rem;color:#00eaff;
    text-shadow:0 0 15px rgba(0,234,255,.7)
  }
  .sub{font-size:1rem;opacity:.85}

  /* ‚Äî‚Äî Menu ‚Äî‚Äî */
  .menu{
    display:flex;flex-wrap:wrap;justify-content:center;
    gap:20px;margin:30px;
    opacity:0;transform:translateY(-20px);
    animation:fadeSlideIn 1s ease forwards;
  }
  .menu button{
    padding:20px;width:150px;height:150px;
    font-size:1rem;font-weight:700;border:none;border-radius:12px;cursor:pointer;
    background:rgba(255,255,255,.08);color:#fff;
    box-shadow:0 0 15px rgba(0,234,255,.3);
    display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;
    backdrop-filter:blur(8px);
    transition:transform .3s ease, box-shadow .3s ease;
  }
  .menu button:hover{transform:scale(1.05);box-shadow:0 0 25px rgba(0,234,255,.8)}

  .icon{font-size:2.5rem}
  .glow{animation:glowPulse 1s infinite alternate;color:#ffea00}
  @keyframes glowPulse{
    from{ text-shadow:0 0 5px yellow, 0 0 10px orange}
    to{   text-shadow:0 0 15px yellow,0 0 25px orange}
  }
  .rotate{animation:rotateAnim 2s linear infinite;color:#00eaff}
  @keyframes rotateAnim{100%{transform:rotate(360deg)}}
  .spin{animation:spinGear 5s linear infinite;color:#ff9b4b}
  @keyframes spinGear{100%{transform:rotate(360deg)}}
  .charge{animation:chargeAnim 1.5s infinite alternate;color:#00ff7f}
  @keyframes chargeAnim{from{opacity:.6} to{opacity:1; text-shadow:0 0 15px #00ff7f}}
  @keyframes fadeSlideIn{to{opacity:1;transform:translateY(0)}}

  /* ‚Äî‚Äî Cards ‚Äî‚Äî */
  .card{
    background:rgba(255,255,255,.08);border-radius:15px;padding:20px;max-width:400px;margin:20px auto;
    backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 20px rgba(0,0,0,.4);
    display:none;opacity:0;animation:fadeIn .6s ease forwards;text-align:left;
  }
  @keyframes fadeIn{to{opacity:1}}

  label{display:block;margin-top:10px;font-weight:700}
  input{
    width:95%;padding:10px;margin-top:5px;border-radius:8px;border:none;
    background:rgba(255,255,255,.15);color:#fff;outline:none;
  }
  input::placeholder{color:rgba(255,255,255,.6)}

  .controls{margin-top:15px;display:flex;gap:10px}
  .calc-btn{
    flex:1;padding:10px 15px;border:none;border-radius:8px;font-weight:700;cursor:pointer;
    background:linear-gradient(90deg,#ffd36b,#ff9b4b);color:#06121a;
  }
  .secondary{
    background:linear-gradient(90deg,#00eaff,#0077ff);color:#001018;
  }
  .result{
    margin-top:15px;padding:10px;background:rgba(0,0,0,.3);border-radius:8px;text-align:center
  }
</style>
</head>
<body>

<header>
  <h1>‚ö° EEE Buddy ‚Äî Multi-Tool</h1>
  <div class="sub">Choose your calculator</div>
</header>

<!-- Menu -->
<div class="menu">
  <button onclick="showCalc('ohm')"><div class="icon glow">‚ö°</div>Ohm's Law</button>
  <button onclick="showCalc('xfmr')"><div class="icon rotate">üîÑ</div>Transformer</button>
  <button onclick="showCalc('three')"><div class="icon spin">‚öôÔ∏è</div>3-Phase Power</button>
  <button onclick="showCalc('battery')"><div class="icon charge">üîã</div>Battery Backup</button>
</div>

<!-- Ohm‚Äôs Law -->
<div id="ohm" class="card">
  <h2>Ohm's Law</h2>
  <label>Voltage (V)</label><input id="ohmV" type="number" step="any" inputmode="decimal" placeholder="e.g., 12">
  <label>Current (A)</label><input id="ohmI" type="number" step="any" inputmode="decimal" placeholder="e.g., 2">
  <label>Resistance (Œ©)</label><input id="ohmR" type="number" step="any" inputmode="decimal" placeholder="e.g., 6">
  <label>Power (W)</label><input id="ohmP" type="number" step="any" inputmode="decimal" placeholder="e.g., 24">
  <div class="controls">
    <button class="calc-btn" onclick="calcOhm()">Calculate</button>
    <button class="calc-btn secondary" onclick="clearOhm()">Clear</button>
  </div>
  <div id="ohmRes" class="result"></div>
</div>

<!-- Transformer -->
<div id="xfmr" class="card">
  <h2>Transformer</h2>
  <label>Primary Voltage (Vp)</label><input id="tp_vp" type="number" step="any" inputmode="decimal" placeholder="e.g., 230">
  <label>Primary Current (Ip)</label><input id="tp_ip" type="number" step="any" inputmode="decimal" placeholder="e.g., 2">
  <label>Turns Ratio (Np/Ns)</label><input id="tp_ratio" type="number" step="any" inputmode="decimal" placeholder="Default 2">
  <div class="controls">
    <button class="calc-btn" onclick="calcXfmr()">Calculate</button>
    <button class="calc-btn secondary" onclick="clearXfmr()">Clear</button>
  </div>
  <div id="tpRes" class="result"></div>
</div>

<!-- 3-Phase Power -->
<div id="three" class="card">
  <h2>3-Phase Power</h2>
  <label>Line Voltage (V)</label><input id="t_vl" type="number" step="any" inputmode="decimal" placeholder="e.g., 415">
  <label>Line Current (A)</label><input id="t_il" type="number" step="any" inputmode="decimal" placeholder="e.g., 50">
  <label>Power Factor</label><input id="t_pf" type="number" step="any" inputmode="decimal" placeholder="0.8">
  <div class="controls">
    <button class="calc-btn" onclick="calcThree()">Calculate</button>
    <button class="calc-btn secondary" onclick="clearThree()">Clear</button>
  </div>
  <div id="threeRes" class="result"></div>
</div>

<!-- Battery -->
<div id="battery" class="card">
  <h2>Battery Backup</h2>
  <label>Battery Capacity (Ah)</label><input id="b_ah" type="number" step="any" inputmode="decimal" placeholder="e.g., 150">
  <label>Voltage (V)</label><input id="b_v" type="number" step="any" inputmode="decimal" placeholder="e.g., 12 or 48">
  <label>Load (W)</label><input id="b_load" type="number" step="any" inputmode="decimal" placeholder="e.g., 200">
  <div class="controls">
    <button class="calc-btn" onclick="calcBattery()">Calculate</button>
    <button class="calc-btn secondary" onclick="clearBattery()">Clear</button>
  </div>
  <div id="batRes" class="result"></div>
</div>

<script>
  // ‚Äî‚Äî‚Äî Navigation ‚Äî‚Äî‚Äî
  function showCalc(id){
    document.querySelectorAll('.card').forEach(c=>c.style.display='none');
    const card=document.getElementById(id);
    card.style.display='block';
    card.style.animation='fadeIn .6s ease forwards';
    card.scrollIntoView({behavior:'smooth', block:'start'});
  }

  // Robust number parser (handles blanks & commas)
  function numFrom(id){
    const raw = (document.getElementById(id).value || "").toString().trim().replace(/,/g,'.');
    const n = parseFloat(raw);
    return Number.isFinite(n) ? n : null;
  }

  // ‚Äî‚Äî‚Äî Ohm‚Äôs Law ‚Äî‚Äî‚Äî
  function calcOhm(){
    let V=numFrom('ohmV'), I=numFrom('ohmI'), R=numFrom('ohmR'), P=numFrom('ohmP');
    if ([V,I,R,P].filter(x=>x!==null).length<2){ alert('Enter at least two values'); return; }

    if (V!==null && I!==null){ R=V/I; P=V*I; }
    else if (V!==null && R!==null){ I=V/R; P=V*I; }
    else if (I!==null && R!==null){ V=I*R; P=V*I; }
    else if (P!==null && I!==null){ V=P/I; R=V/I; }
    else if (P!==null && V!==null){ I=P/V; R=V/I; }
    else if (P!==null && R!==null){ I=Math.sqrt(P/R); V=I*R; }

    document.getElementById('ohmRes').innerHTML =
      `V=${V.toFixed(2)} V<br>I=${I.toFixed(2)} A<br>R=${R.toFixed(2)} Œ©<br>P=${P.toFixed(2)} W`;
  }
  function clearOhm(){ ['ohmV','ohmI','ohmR','ohmP'].forEach(id=>document.getElementById(id).value=''); document.getElementById('ohmRes').innerHTML=''; }

  // ‚Äî‚Äî‚Äî Transformer ‚Äî‚Äî‚Äî
  function calcXfmr(){
    const Vp=numFrom('tp_vp'), Ip=numFrom('tp_ip'); let ratio=numFrom('tp_ratio');
    if (ratio===null || ratio<=0) ratio=2;
    if (Vp===null || Ip===null){ alert('Enter primary V and I'); return; }
    const Vs=Vp/ratio, Is=Ip*ratio;
    document.getElementById('tpRes').innerHTML =
      `Vs=${Vs.toFixed(2)} V<br>Is=${Is.toFixed(2)} A<br>Turns Ratio=${ratio}`;
  }
  function clearXfmr(){ ['tp_vp','tp_ip','tp_ratio'].forEach(id=>document.getElementById(id).value=''); document.getElementById('tpRes').innerHTML=''; }

  // ‚Äî‚Äî‚Äî 3-Phase (FIXED NaN) ‚Äî‚Äî‚Äî
  function calcThree(){
    const Vl=numFrom('t_vl'), Il=numFrom('t_il'); let pf=numFrom('t_pf');
    if (Vl===null || Il===null){ alert('Enter line voltage and line current'); return; }
    if (pf===null || pf<=0 || pf>1) pf=1; // clamp if blank/invalid

    const S_va = Math.SQRT3 * Vl * Il;          // VA
    const P_w  = S_va * pf;                      // W
    const Q_var = Math.sqrt(Math.max(0, S_va*S_va - P_w*P_w)); // VAR
    const P_kw = P_w / 1000;

    document.getElementById('threeRes').innerHTML =
      `S = ${S_va.toFixed(2)} VA<br>P = ${P_kw.toFixed(3)} kW (pf=${pf})<br>Q = ${Q_var.toFixed(2)} VAR`;
  }
  function clearThree(){ ['t_vl','t_il','t_pf'].forEach(id=>document.getElementById(id).value=''); document.getElementById('threeRes').innerHTML=''; }

  // ‚Äî‚Äî‚Äî Battery ‚Äî‚Äî‚Äî
  function calcBattery(){
    const Ah=numFrom('b_ah'), V=numFrom('b_v'), loadW=numFrom('b_load');
    if (Ah===null || V===null || loadW===null){ alert('Enter Ah, Voltage, and Load'); return; }
    const dod=0.8, eff=0.9;
    const totalWh=Ah*V, usableWh=totalWh*dod*eff;
    const hours=usableWh/loadW;
    const hr=Math.floor(hours), min=Math.round((hours-hr)*60);
    document.getElementById('batRes').innerHTML =
      `Backup Time ‚âà ${hr}h ${min}m<br>(Usable Energy = ${usableWh.toFixed(1)} Wh)`;
  }
  function clearBattery(){ ['b_ah','b_v','b_load'].forEach(id=>document.getElementById(id).value=''); document.getElementById('batRes').innerHTML=''; }
</script>

</body>
</html>
